{"version":3,"sources":["music-player.js","settings.js"],"names":["playerState","soundVolume","musicVolume","currentTrack","undefined","playMainMenuMusic","stopMusic","trackNumber","Math","round","random","document","getElementsByClassName","length","onended","play","playGameMusic","pause","currentTime","setSettings","elements","i","volume","getElementById","value","playBeeps","getElementsByTagName","then","playHit","onchange","e","target","localStorage","setItem","JSON","stringify","handleControlsChange","checked","getAttribute","substr","handleSettingsChange","loadControlsSettings","getItem","parse","loadSettings","xmlHttp","XMLHttpRequest","open","onreadystatechange","res","responseText","name","_id","err","querySelector","innerText","send"],"mappings":"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","file":"settings.30d9060c.js","sourceRoot":"..","sourcesContent":["let playerState = {\r\n    soundVolume: 1,\r\n    musicVolume: 1,\r\n    currentTrack: undefined,\r\n}\r\n\r\nfunction playMainMenuMusic() {\r\n    if (playerState.currentTrack !== undefined) { stopMusic(); }\r\n        let trackNumber = Math.round(Math.random() * document.getElementsByClassName('music-menu').length);\r\n        if (trackNumber > 0) { trackNumber -= 1; }\r\n        playerState.currentTrack = document.getElementsByClassName('music-menu')[trackNumber];\r\n        playerState.currentTrack.onended = () => { playMainMenuMusic(); }\r\n        playerState.currentTrack.play();\r\n}\r\n\r\nfunction playGameMusic() {\r\n    if (playerState.currentTrack !== undefined) { stopMusic(); }\r\n        let trackNumber = Math.round(Math.random() * document.getElementsByClassName('music-game').length);\r\n        if (trackNumber > 0) { trackNumber -= 1; }\r\n        playerState.currentTrack = document.getElementsByClassName('music-game')[trackNumber];\r\n        playerState.currentTrack.onended = () => { playGameMusic(); }\r\n        playerState.currentTrack.play();\r\n}\r\n\r\nfunction stopMusic() {\r\n    if (playerState.currentTrack !== undefined) { playerState.currentTrack.pause(); playerState.currentTrack.currentTime = 0; }\r\n}\r\n\r\ndocument.getElementById('music-volume').onchange = (e) => {\r\n    playerState.musicVolume = e.target.value * 0.1;\r\n    let elements = document.getElementsByClassName('music');\r\n    for (let i=0 ; i < elements.length ; i++) {\r\n        elements[i].volume = playerState.musicVolume;\r\n    }\r\n    localStorage.setItem('musicVolume', JSON.stringify(playerState.musicVolume));\r\n}\r\n\r\ndocument.getElementById('sound-volume').onchange = (e) => {\r\n    playerState.soundVolume = e.target.value * 0.1;\r\n    let elements = document.getElementsByClassName('sound');\r\n    for (let i=0 ; i < elements.length ; i++) {\r\n        elements[i].volume = playerState.soundVolume;\r\n    }\r\n    document.getElementById('audio-hit1').play();\r\n    localStorage.setItem('soundVolume', JSON.stringify(playerState.soundVolume));\r\n}\r\n\r\nfunction setSettings(musicVolume, soundVolume) {\r\n    playerState.musicVolume = musicVolume;\r\n    playerState.soundVolume = soundVolume;\r\n    let elements = document.getElementsByClassName('music');\r\n    for (let i=0 ; i < elements.length ; i++) {\r\n        elements[i].volume = playerState.soundVolume;\r\n    }\r\n    document.getElementById('music-volume').value = playerState.musicVolume * 10;\r\n    elements = document.getElementsByClassName('sound');\r\n    for (let i=0 ; i < elements.length ; i++) {\r\n        elements[i].volume = playerState.soundVolume;\r\n    }\r\n    document.getElementById('sound-volume').value = playerState.soundVolume * 10;\r\n}\r\n\r\nfunction playBeeps() {\r\n    if (Math.round(Math.random() * 1) == 0) {\r\n        document.getElementsByTagName('audio')[0].play().then(() => {\r\n        });\r\n    } else {\r\n        document.getElementsByTagName('audio')[1].play().then(() => {\r\n        });\r\n    }\r\n}\r\n\r\nfunction playHit() {\r\n    if (Math.round(Math.random() * 1) == 0) {\r\n        document.getElementById('audio-hit1').play().then(() => {\r\n        });\r\n    } else {\r\n        document.getElementById('audio-hit2').play().then(() => {\r\n        });\r\n    }\r\n}\r\n\r\nexport {playMainMenuMusic, playGameMusic, stopMusic, setSettings, playBeeps, playHit}\r\n","import {setSettings} from \"./music-player\";\r\n\r\ndocument.getElementById('name-input').onchange = (e) => {\r\n    let xmlHttp = new XMLHttpRequest();\r\n    xmlHttp.open(\"POST\", 'https://jazzt-pong.herokuapp.com/changeName', true);\r\n    // xmlHttp.open(\"POST\", 'http://localhost:80/changeName', true);\r\n    xmlHttp.onreadystatechange = () => {\r\n        let res = JSON.parse(xmlHttp.responseText);\r\n        if (res.name) { localStorage.setItem('name', res.name); }\r\n        if (res._id) { localStorage.setItem('id', JSON.stringify(res._id)); }\r\n        if (res.err) {\r\n            document.getElementById('name-input').value = localStorage.getItem('name');\r\n            document.getElementById('settings-error').querySelector('span').innerText = res.err;\r\n        } else {\r\n            document.getElementById('settings-error').querySelector('span').innerText = '';\r\n        }\r\n    }\r\n    if (localStorage.getItem('id')) {\r\n        xmlHttp.send(JSON.stringify({_id: JSON.parse(localStorage.getItem('id')),name: e.target.value}));\r\n    } else {\r\n        xmlHttp.send(JSON.stringify({name: e.target.value}));\r\n    }\r\n}\r\n\r\nfunction handleControlsChange() {\r\n    let elements = document.getElementsByClassName('controls');\r\n    for (let i=0 ; i < elements.length ; i++) {\r\n        elements[i].onchange = (e) => {\r\n            if (e.target.checked) {\r\n                localStorage.setItem('controls', e.target.getAttribute('class').substr(0,1));\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction handleSettingsChange() {\r\n    document.getElementById('difficulty-slide').onchange = () => {\r\n        localStorage.setItem('difficulty', JSON.stringify(document.getElementById('difficulty-slide').value));\r\n    }\r\n}\r\nfunction loadControlsSettings() {\r\n    if (localStorage.getItem('controls')) {\r\n        document.getElementsByClassName('controls')[JSON.parse(localStorage.getItem('controls'))].checked = true;\r\n    } else {\r\n        localStorage.setItem('controls', '1'); loadControlsSettings();\r\n    }\r\n}\r\nhandleControlsChange(); handleSettingsChange();\r\n\r\nfunction loadSettings() {\r\n    if (localStorage.getItem('name')) {document.getElementById('name-input').value = localStorage.getItem('name');}\r\n    document.getElementById('difficulty-slide').value = JSON.parse(localStorage.getItem('difficulty')) || 3;\r\n    if (localStorage.getItem('musicVolume') && localStorage.getItem('soundVolume')) {\r\n        setSettings(JSON.parse(localStorage.getItem('musicVolume')), JSON.parse(localStorage.getItem('soundVolume')));\r\n    }\r\n    loadControlsSettings();\r\n}\r\n\r\nexport {loadSettings}\r\n"]}